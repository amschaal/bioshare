{% extends "base.html" %}
{% load static %}
{% load compress %}

{% block title %}Share Locked{% endblock %}

{% block content %}
  <h3>
    Share "{{share.name}}" with ID "{{share.id}}" has been locked.  Please contact the server administrator.
  </h3>
  {% if user.is_superuser %}
  <div class="alert alert-danger">
    <br>Locked: {{share.locked}}
    <br>Last checked: {{share.last_checked}}
    <br>Symlinks found: {{share.symlinks_found}}
    <br>Illegal path found: {{share.illegal_path_found}}{% if message %} - {{message}} {% endif %}
    <h4>Symlinks</h4>
      <table class="table">
        <tr><th>Source</th><th>Destination</th><th>Depth</th><th>Warning</th></tr>
        {% for link in symlinks %}
          <tr><td>{{link.path}}</td><td>{% if link.warning %}<b><i class="icon-warning-sign"></i>{{link.target}}</b>{% else %}{{link.target}}{% endif %}</td><td>{{link.depth}}</td><td>{{link.warning}}</td></tr>
        {% endfor %}
      </table>
      {% if not share.illegal_path_found %}
        <a class="btn btn-danger" href="{% url 'unlock' share=share.id %}">Unlock</a>
      {% endif %}
  </div>
  {% include 'share/logs.html' %}
  {% endif %}
{% endblock %}
{% block scripts %}
{{block.super}}
{% compress js %}
<script src="{% static "js/services/ng-table-services.js" %}"></script>
<script src="{% static "js/controllers/share-controller.js" %}"></script>
{% endcompress %}
{% endblock%}

